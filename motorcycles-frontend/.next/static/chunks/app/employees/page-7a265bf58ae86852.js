(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{3293:(e,a,r)=>{Promise.resolve().then(r.bind(r,8018))},3571:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(5155),l=r(2115),s=r(4873);let i=(0,l.forwardRef)((e,a)=>{let{label:r,error:l,className:i,children:o,...n}=e;return(0,t.jsxs)("div",{className:"space-y-1",children:[r&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r}),(0,t.jsx)("select",{ref:a,className:(0,s.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",l&&"border-red-500 focus:ring-red-500",i),...n,children:o}),l&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:l})]})});i.displayName="Select";let o=i},8018:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>x});var t=r(5155),l=r(2115),s=r(722),i=r(9812),o=r(9960),n=r(1175),d=r(1876),c=r(3571);function m(e){let{isOpen:a,onClose:r,onSuccess:i,employee:m}=e,[u,h]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",jobTitle:"",salary:0,hireDate:new Date().toISOString().split("T")[0],status:"ACTIVE",address:"",city:"",state:"",zipCode:"",country:"",notes:"",terminationDate:""}),[p,g]=(0,l.useState)(!1),[x,y]=(0,l.useState)({});(0,l.useEffect)(()=>{m?h({firstName:m.firstName||"",lastName:m.lastName||"",email:m.email||"",phone:m.phone||"",jobTitle:m.jobTitle||"",salary:m.salary||0,hireDate:m.hireDate?m.hireDate.split("T")[0]:new Date().toISOString().split("T")[0],status:m.status||"ACTIVE",address:m.address||"",city:m.city||"",state:m.state||"",zipCode:m.zipCode||"",country:m.country||"",notes:m.notes||"",terminationDate:m.terminationDate?m.terminationDate.split("T")[0]:""}):h({firstName:"",lastName:"",email:"",phone:"",jobTitle:"",salary:0,hireDate:new Date().toISOString().split("T")[0],status:"ACTIVE",address:"",city:"",state:"",zipCode:"",country:"",notes:"",terminationDate:""}),y({})},[m,a]);let j=async e=>{if(e.preventDefault(),(()=>{let e={};return(u.firstName.trim()?u.firstName.length<2?e.firstName="El nombre debe tener al menos 2 caracteres":/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(u.firstName)||(e.firstName="El nombre solo puede contener letras"):e.firstName="El nombre es requerido",u.lastName.trim()?u.lastName.length<2?e.lastName="El apellido debe tener al menos 2 caracteres":/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(u.lastName)||(e.lastName="El apellido solo puede contener letras"):e.lastName="El apellido es requerido",u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(e.email="Formato de email inv\xe1lido"):e.email="El email es requerido",u.jobTitle.trim()?u.jobTitle.length<2&&(e.jobTitle="El cargo debe tener al menos 2 caracteres"):e.jobTitle="El cargo es requerido",u.hireDate)?new Date(u.hireDate)>new Date&&(e.hireDate="La fecha de contrataci\xf3n no puede ser en el futuro"):e.hireDate="La fecha de contrataci\xf3n es requerida",u.phone&&!/^[\d\s\-\+\(\)]+$/.test(u.phone)&&(e.phone="Formato de tel\xe9fono inv\xe1lido"),null!==u.salary&&void 0!==u.salary&&u.salary<0&&(e.salary="El salario no puede ser negativo"),null!==u.salary&&void 0!==u.salary&&u.salary>1e7&&(e.salary="El salario no puede exceder $10,000,000"),u.address&&u.address.length<5&&(e.address="La direcci\xf3n debe tener al menos 5 caracteres"),u.city&&u.city.length<2&&(e.city="La ciudad debe tener al menos 2 caracteres"),u.zipCode&&!/^[\d\-\s]+$/.test(u.zipCode)&&(e.zipCode="C\xf3digo postal inv\xe1lido"),"TERMINATED"===u.status&&(u.terminationDate?new Date(u.terminationDate)<=new Date(u.hireDate)&&(e.terminationDate="La fecha de terminaci\xf3n debe ser posterior a la fecha de contrataci\xf3n"):e.terminationDate="La fecha de terminaci\xf3n es requerida para empleados terminados"),y(e),0===Object.keys(e).length})()){g(!0);try{let e={...u,hireDate:new Date(u.hireDate).toISOString(),terminationDate:u.terminationDate?new Date(u.terminationDate).toISOString():void 0,salary:u.salary||void 0};m?await s.yD.update(m.id,e):await s.yD.create(e),i(),r()}catch(e){console.error("Error saving employee:",e)}finally{g(!1)}}},b=(e,a)=>{h(r=>({...r,[e]:a})),x[e]&&y(a=>({...a,[e]:""}))};return(0,t.jsx)(n.A,{isOpen:a,onClose:r,title:m?"Editar Empleado":"Nuevo Empleado",size:"lg",children:(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(d.A,{label:"Nombre *",value:u.firstName,onChange:e=>b("firstName",e.target.value),error:x.firstName,placeholder:"Ej: Juan",required:!0}),(0,t.jsx)(d.A,{label:"Apellido *",value:u.lastName,onChange:e=>b("lastName",e.target.value),error:x.lastName,placeholder:"Ej: P\xe9rez",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsx)(d.A,{label:"Email *",type:"email",value:u.email,onChange:e=>b("email",e.target.value),error:x.email,placeholder:"Ej: juan@empresa.com",required:!0}),(0,t.jsx)(d.A,{label:"Tel\xe9fono",type:"tel",value:u.phone,onChange:e=>b("phone",e.target.value),error:x.phone,placeholder:"Ej: +34 123 456 789"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Laboral"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(d.A,{label:"Cargo *",value:u.jobTitle,onChange:e=>b("jobTitle",e.target.value),error:x.jobTitle,placeholder:"Ej: Vendedor, Gerente, Mec\xe1nico",required:!0}),(0,t.jsx)(d.A,{label:"Salario",type:"number",step:"0.01",min:"0",max:"10000000",value:u.salary,onChange:e=>b("salary",parseFloat(e.target.value)||0),error:x.salary,placeholder:"Ej: 50000.00"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsx)(d.A,{label:"Fecha de Contrataci\xf3n *",type:"date",value:u.hireDate,onChange:e=>b("hireDate",e.target.value),error:x.hireDate,required:!0}),(0,t.jsxs)(c.A,{label:"Estado *",value:u.status,onChange:e=>b("status",e.target.value),children:[(0,t.jsx)("option",{value:"ACTIVE",children:"Activo"}),(0,t.jsx)("option",{value:"INACTIVE",children:"Inactivo"}),(0,t.jsx)("option",{value:"TERMINATED",children:"Terminado"})]}),"TERMINATED"===u.status&&(0,t.jsx)(d.A,{label:"Fecha de Terminaci\xf3n *",type:"date",value:u.terminationDate,onChange:e=>b("terminationDate",e.target.value),error:x.terminationDate,required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Direcci\xf3n"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(d.A,{label:"Direcci\xf3n",value:u.address,onChange:e=>b("address",e.target.value),error:x.address,placeholder:"Ej: Calle Principal 123, Piso 2A"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(d.A,{label:"Ciudad",value:u.city,onChange:e=>b("city",e.target.value),error:x.city,placeholder:"Ej: Madrid"}),(0,t.jsx)(d.A,{label:"Estado/Provincia",value:u.state,onChange:e=>b("state",e.target.value),error:x.state,placeholder:"Ej: Madrid"}),(0,t.jsx)(d.A,{label:"C\xf3digo Postal",value:u.zipCode,onChange:e=>b("zipCode",e.target.value),error:x.zipCode,placeholder:"Ej: 28001"})]}),(0,t.jsx)(d.A,{label:"Pa\xeds",value:u.country,onChange:e=>b("country",e.target.value),error:x.country,placeholder:"Ej: Espa\xf1a"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notas Adicionales"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notas"}),(0,t.jsx)("textarea",{value:u.notes,onChange:e=>b("notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder:text-gray-400 text-gray-900",rows:3,placeholder:"Comentarios adicionales sobre el empleado..."})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)(o.A,{type:"button",variant:"secondary",onClick:r,children:"Cancelar"}),(0,t.jsxs)(o.A,{type:"submit",loading:p,children:[m?"Actualizar":"Crear"," Empleado"]})]})]})})}var u=r(4125),h=r(3717),p=r(2525),g=r(4616);function x(){let[e,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null),[x,y]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),[f,E]=(0,l.useState)(null),[C,D]=(0,l.useState)(!1),A=async()=>{try{var e;n(!0);let r=await s.yD.getAll(),t=Array.isArray(r.data)?r.data:(null==(e=r.data)?void 0:e.data)||[];console.log("Employees data received:",t),console.log("First employee:",t[0]),a(t),c(null)}catch(e){console.error("Error fetching employees:",e),c("Error al cargar los empleados")}finally{n(!1)}};(0,l.useEffect)(()=>{A()},[]);let T=async()=>{if(f){D(!0);try{await s.yD.delete(f.id),await A(),b(!1),E(null)}catch(e){console.error("Error deleting employee:",e),c("Error al eliminar el empleado")}finally{D(!1)}}},w=[{key:"firstName",header:"Nombre",render:e=>e.firstName||"-"},{key:"lastName",header:"Apellido",render:e=>e.lastName||"-"},{key:"email",header:"Email",render:e=>e.email||"-"},{key:"jobTitle",header:"Cargo",render:e=>e.jobTitle||"-"},{key:"phone",header:"Tel\xe9fono",render:e=>e.phone||"-"},{key:"status",header:"Estado",render:e=>{var a;return a=e.status,(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-yellow-100 text-yellow-800",TERMINATED:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"),children:{ACTIVE:"Activo",INACTIVE:"Inactivo",TERMINATED:"Terminado"}[a]||a})}},{key:"actions",header:"Acciones",render:e=>(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(o.A,{variant:"ghost",size:"sm",onClick:()=>{v(e),y(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(o.A,{variant:"ghost",size:"sm",onClick:()=>{E(e),b(!0)},children:(0,t.jsx)(p.A,{className:"h-4 w-4 text-red-500"})})]})}];return r?(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-3",children:"Cargando empleados..."})]}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Empleados"}),(0,t.jsxs)(o.A,{onClick:()=>{v(null),y(!0)},children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Nuevo Empleado"]})]}),d&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsx)(i.A,{data:e,columns:w,emptyMessage:"No hay empleados registrados"})}),(0,t.jsx)(m,{isOpen:x,onClose:()=>y(!1),onSuccess:()=>{A()},employee:N}),(0,t.jsx)(u.A,{isOpen:j,onClose:()=>{b(!1),E(null)},onConfirm:T,title:"Eliminar Empleado",message:"\xbfEst\xe1s seguro de que deseas eliminar este empleado?",itemName:f?"".concat(f.firstName," ").concat(f.lastName):"",loading:C,checkDependencies:f?()=>s.yD.checkDependencies(f.id):void 0})]})}}},e=>{e.O(0,[445,139,441,964,358],()=>e(e.s=3293)),_N_E=e.O()}]);