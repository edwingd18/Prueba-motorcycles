(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{3571:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(5155),s=t(2115),l=t(4873);let n=(0,s.forwardRef)((e,a)=>{let{label:t,error:s,className:n,children:i,...o}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsx)("select",{ref:a,className:(0,l.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",s&&"border-red-500 focus:ring-red-500",n),...o,children:i}),s&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:s})]})});n.displayName="Select";let i=n},3927:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var r=t(5155),s=t(2115),l=t(9946);let n=(0,l.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),i=(0,l.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var o=t(3717),d=t(2525),c=t(4616),m=t(722),u=t(9812),h=t(9960),p=t(1175),x=t(1876),N=t(3571);function g(e){let{isOpen:a,onClose:t,onSuccess:l,customer:n}=e,[i,o]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",documentNumber:"",documentType:"DNI",address:"",city:"",state:"",zipCode:"",country:""}),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)({});(0,s.useEffect)(()=>{n?o({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",phone:n.phone||"",documentNumber:n.documentNumber||"",documentType:n.documentType||"DNI",address:n.address||"",city:n.city||"",state:n.state||"",zipCode:n.zipCode||"",country:n.country||""}):o({firstName:"",lastName:"",email:"",phone:"",documentNumber:"",documentType:"DNI",address:"",city:"",state:"",zipCode:"",country:""}),g({})},[n,a]);let y=async e=>{if(e.preventDefault(),(()=>{let e={};return i.firstName.trim()?i.firstName.length<2?e.firstName="El nombre debe tener al menos 2 caracteres":/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(i.firstName)||(e.firstName="El nombre solo puede contener letras"):e.firstName="El nombre es requerido",i.lastName.trim()?i.lastName.length<2?e.lastName="El apellido debe tener al menos 2 caracteres":/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(i.lastName)||(e.lastName="El apellido solo puede contener letras"):e.lastName="El apellido es requerido",i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Formato de email inv\xe1lido"):e.email="El email es requerido",i.phone.trim()?/^[\d\s\-\+\(\)]+$/.test(i.phone)?i.phone.replace(/\D/g,"").length<7&&(e.phone="El tel\xe9fono debe tener al menos 7 d\xedgitos"):e.phone="Formato de tel\xe9fono inv\xe1lido":e.phone="El tel\xe9fono es requerido",i.documentNumber.trim()&&i.documentNumber.length<5&&(e.documentNumber="El n\xfamero de documento debe tener al menos 5 caracteres"),i.address.trim()&&i.address.length<5&&(e.address="La direcci\xf3n debe tener al menos 5 caracteres"),i.city.trim()&&i.city.length<2&&(e.city="La ciudad debe tener al menos 2 caracteres"),i.zipCode.trim()&&!/^[\d\-\s]+$/.test(i.zipCode)&&(e.zipCode="C\xf3digo postal inv\xe1lido"),g(e),0===Object.keys(e).length})()){c(!0);try{n?await m.mJ.update(n.id,i):await m.mJ.create(i),l(),t()}catch(e){console.error("Error saving customer:",e)}finally{c(!1)}}},j=(e,a)=>{o(t=>({...t,[e]:a})),u[e]&&g(a=>({...a,[e]:""}))};return(0,r.jsx)(p.A,{isOpen:a,onClose:t,title:n?"Editar Cliente":"Nuevo Cliente",size:"lg",children:(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(x.A,{label:"Nombre *",value:i.firstName,onChange:e=>j("firstName",e.target.value),error:u.firstName,placeholder:"Ej: Juan",required:!0}),(0,r.jsx)(x.A,{label:"Apellido *",value:i.lastName,onChange:e=>j("lastName",e.target.value),error:u.lastName,placeholder:"Ej: P\xe9rez",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsx)(x.A,{label:"Email *",type:"email",value:i.email,onChange:e=>j("email",e.target.value),error:u.email,placeholder:"Ej: juan@ejemplo.com",required:!0}),(0,r.jsx)(x.A,{label:"Tel\xe9fono *",type:"tel",value:i.phone,onChange:e=>j("phone",e.target.value),error:u.phone,placeholder:"Ej: +34 123 456 789",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Documento de Identidad"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(N.A,{label:"Tipo de Documento",value:i.documentType,onChange:e=>j("documentType",e.target.value),children:[(0,r.jsx)("option",{value:"DNI",children:"DNI"}),(0,r.jsx)("option",{value:"CEDULA",children:"C\xe9dula"}),(0,r.jsx)("option",{value:"PASSPORT",children:"Pasaporte"}),(0,r.jsx)("option",{value:"DRIVER_LICENSE",children:"Licencia de Conducir"})]}),(0,r.jsx)(x.A,{label:"N\xfamero de Documento",value:i.documentNumber,onChange:e=>j("documentNumber",e.target.value),error:u.documentNumber,placeholder:"Ej: 12345678A"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Direcci\xf3n"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(x.A,{label:"Direcci\xf3n",value:i.address,onChange:e=>j("address",e.target.value),error:u.address,placeholder:"Ej: Calle Principal 123, Piso 2A"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(x.A,{label:"Ciudad",value:i.city,onChange:e=>j("city",e.target.value),error:u.city,placeholder:"Ej: Madrid"}),(0,r.jsx)(x.A,{label:"Estado/Provincia",value:i.state,onChange:e=>j("state",e.target.value),error:u.state,placeholder:"Ej: Madrid"}),(0,r.jsx)(x.A,{label:"C\xf3digo Postal",value:i.zipCode,onChange:e=>j("zipCode",e.target.value),error:u.zipCode,placeholder:"Ej: 28001"})]}),(0,r.jsx)(x.A,{label:"Pa\xeds",value:i.country,onChange:e=>j("country",e.target.value),error:u.country,placeholder:"Ej: Espa\xf1a"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,r.jsx)(h.A,{type:"button",variant:"secondary",onClick:t,children:"Cancelar"}),(0,r.jsxs)(h.A,{type:"submit",loading:d,children:[n?"Actualizar":"Crear"," Cliente"]})]})]})})}var y=t(4125);function j(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!1),[N,j]=(0,s.useState)(null),[v,f]=(0,s.useState)(!1),[b,C]=(0,s.useState)(null),[A,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k()},[]);let k=async()=>{try{var e;l(!0);let t=await m.mJ.getAll();console.log("Customers API Response:",t.data);let r=Array.isArray(t.data)?t.data:(null==(e=t.data)?void 0:e.data)||[];a(r)}catch(e){console.error("Error fetching customers:",e)}finally{l(!1)}},w=async()=>{if(b){E(!0);try{await m.mJ.delete(b.id),await k(),f(!1),C(null)}catch(e){console.error("Error deleting customer:",e)}finally{E(!1)}}},z=[{key:"id",header:"ID"},{key:"name",header:"Nombre",render:e=>"".concat(e.firstName," ").concat(e.lastName)},{key:"email",header:"Email",render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,r.jsx)("a",{href:"mailto:".concat(e.email),className:"text-blue-600 hover:underline",children:e.email})]})},{key:"phone",header:"Tel\xe9fono",render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,r.jsx)("a",{href:"tel:".concat(e.phone),className:"text-blue-600 hover:underline",children:e.phone})]})},{key:"documentNumber",header:"Documento",render:e=>e.documentNumber?"".concat(e.documentType||""," ").concat(e.documentNumber):"-"},{key:"city",header:"Ciudad",render:e=>e.city||"-"},{key:"status",header:"Estado",render:e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"INACTIVE"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status||"ACTIVE"})},{key:"actions",header:"Acciones",render:e=>(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(h.A,{variant:"ghost",size:"sm",onClick:()=>{j(e),x(!0)},children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}),(0,r.jsx)(h.A,{variant:"ghost",size:"sm",onClick:()=>{C(e),f(!0)},children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-red-500"})})]})}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Clientes"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Administra la informaci\xf3n de los clientes"})]}),(0,r.jsxs)(h.A,{onClick:()=>{j(null),x(!0)},children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Nuevo Cliente"]})]}),(0,r.jsx)(u.A,{data:e,columns:z,loading:t,emptyMessage:"No hay clientes registrados"}),(0,r.jsx)(g,{isOpen:p,onClose:()=>{x(!1),j(null)},onSuccess:()=>{k()},customer:N}),(0,r.jsx)(y.A,{isOpen:v,onClose:()=>{f(!1),C(null)},onConfirm:w,title:"Eliminar Cliente",message:"\xbfEst\xe1s seguro de que deseas eliminar este cliente?",itemName:b?"".concat(b.firstName," ").concat(b.lastName):"",loading:A,checkDependencies:b?()=>m.mJ.checkDependencies(b.id):void 0})]})}},4937:(e,a,t)=>{Promise.resolve().then(t.bind(t,3927))}},e=>{e.O(0,[445,139,441,964,358],()=>e(e.s=4937)),_N_E=e.O()}]);