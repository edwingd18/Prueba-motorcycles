(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{1701:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var t=r(5155),c=r(2115),i=r(3717),l=r(2525),n=r(4616),s=r(722),o=r(9812),d=r(9960),m=r(1175),p=r(1876);function u(e){let{isOpen:a,onClose:r,onSuccess:i,motorcycle:l}=e,[n,o]=(0,c.useState)({code:"",name:"",description:"",brand:"",model:"",year:new Date().getFullYear(),engine_capacity:0,price:0}),[u,g]=(0,c.useState)(!1),[h,y]=(0,c.useState)({});(0,c.useEffect)(()=>{l?o({code:l.code,name:l.name,description:l.description,brand:l.brand,model:l.model,year:l.year,engine_capacity:l.engine_capacity,price:l.price}):o({code:"",name:"",description:"",brand:"",model:"",year:new Date().getFullYear(),engine_capacity:0,price:0}),y({})},[l,a]);let x=async e=>{if(e.preventDefault(),(()=>{let e={};return n.code.trim()?n.code.length<3&&(e.code="El c\xf3digo debe tener al menos 3 caracteres"):e.code="El c\xf3digo es requerido",n.name.trim()?n.name.length<3&&(e.name="El nombre debe tener al menos 3 caracteres"):e.name="El nombre es requerido",n.description.trim()?n.description.length<10&&(e.description="La descripci\xf3n debe tener al menos 10 caracteres"):e.description="La descripci\xf3n es requerida",n.brand.trim()?n.brand.length<2&&(e.brand="La marca debe tener al menos 2 caracteres"):e.brand="La marca es requerida",n.model.trim()?n.model.length<2&&(e.model="El modelo debe tener al menos 2 caracteres"):e.model="El modelo es requerido",(n.year<1900||n.year>new Date().getFullYear()+1)&&(e.year="A\xf1o debe estar entre 1900 y ".concat(new Date().getFullYear()+1)),n.engine_capacity<=0?e.engine_capacity="La cilindrada debe ser mayor a 0":n.engine_capacity>3e3&&(e.engine_capacity="La cilindrada no puede exceder 3000cc"),n.price<=0?e.price="El precio debe ser mayor a 0":n.price>1e6&&(e.price="El precio no puede exceder €1,000,000"),y(e),0===Object.keys(e).length})()){g(!0);try{l?await s.Di.update(l.id,n):await s.Di.create(n),i(),r()}catch(e){console.error("Error saving motorcycle:",e)}finally{g(!1)}}},b=(e,a)=>{o(r=>({...r,[e]:a})),h[e]&&y(a=>({...a,[e]:""}))};return(0,t.jsx)(m.A,{isOpen:a,onClose:r,title:l?"Editar Motocicleta":"Nueva Motocicleta",size:"lg",children:(0,t.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(p.A,{label:"C\xf3digo",value:n.code,onChange:e=>b("code",e.target.value),error:h.code,placeholder:"Ej: KAW001, HON002",required:!0}),(0,t.jsx)(p.A,{label:"Nombre",value:n.name,onChange:e=>b("name",e.target.value),error:h.name,placeholder:"Ej: Ninja 300, CB190R",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n *"}),(0,t.jsx)("textarea",{value:n.description,onChange:e=>b("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder:text-gray-400 text-gray-900",rows:3,placeholder:"Describe las caracter\xedsticas principales de la motocicleta...",required:!0}),h.description&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:h.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(p.A,{label:"Marca",value:n.brand,onChange:e=>b("brand",e.target.value),error:h.brand,placeholder:"Ej: Honda, Yamaha, Kawasaki",required:!0}),(0,t.jsx)(p.A,{label:"Modelo",value:n.model,onChange:e=>b("model",e.target.value),error:h.model,placeholder:"Ej: CBR600RR, YZF-R1",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(p.A,{label:"A\xf1o",type:"number",value:n.year,onChange:e=>b("year",parseInt(e.target.value)||new Date().getFullYear()),error:h.year,min:"1900",max:new Date().getFullYear()+1,placeholder:new Date().getFullYear().toString(),required:!0}),(0,t.jsx)(p.A,{label:"Cilindrada (cc)",type:"number",value:n.engine_capacity,onChange:e=>b("engine_capacity",parseInt(e.target.value)||0),error:h.engine_capacity,min:"1",max:"3000",placeholder:"Ej: 600, 1000",required:!0}),(0,t.jsx)(p.A,{label:"Precio (€)",type:"number",step:"0.01",value:n.price,onChange:e=>b("price",parseFloat(e.target.value)||0),error:h.price,min:"0.01",max:"1000000",placeholder:"Ej: 15000.00",required:!0})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-6 border-t border-gray-200 -mx-4 sm:-mx-6 px-4 sm:px-6 mt-8",children:[(0,t.jsx)(d.A,{type:"button",variant:"secondary",onClick:r,className:"order-2 sm:order-1",children:"Cancelar"}),(0,t.jsxs)(d.A,{type:"submit",loading:u,className:"order-1 sm:order-2",children:[l?"Actualizar":"Crear"," Motocicleta"]})]})]})})}var g=r(4125),h=r(4873);function y(){let[e,a]=(0,c.useState)([]),[r,m]=(0,c.useState)(!0),[p,y]=(0,c.useState)(!1),[x,b]=(0,c.useState)(null),[j,v]=(0,c.useState)(!1),[f,N]=(0,c.useState)(null),[A,C]=(0,c.useState)(!1);(0,c.useEffect)(()=>{E()},[]);let E=async()=>{try{var e;m(!0);let r=await s.Di.getAll();console.log("API Response:",r.data);let t=Array.isArray(r.data)?r.data:(null==(e=r.data)?void 0:e.data)||[];a(t)}catch(e){console.error("Error fetching motorcycles:",e),a([])}finally{m(!1)}},w=async()=>{if(f){C(!0);try{await s.Di.delete(f.id),await E(),v(!1),N(null)}catch(e){console.error("Error deleting motorcycle:",e)}finally{C(!1)}}},k=[{key:"id",header:"ID"},{key:"code",header:"C\xf3digo"},{key:"name",header:"Nombre"},{key:"brand",header:"Marca"},{key:"description",header:"Descripci\xf3n",render:e=>(0,t.jsx)("div",{className:"max-w-xs truncate",title:e.description,children:e.description})},{key:"year",header:"A\xf1o",render:e=>e.year||"-"},{key:"price",header:"Precio",render:e=>e.price?(0,h.v)(e.price):"-"},{key:"actions",header:"Acciones",render:e=>(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(d.A,{variant:"ghost",size:"sm",onClick:()=>{b(e),y(!0)},children:(0,t.jsx)(i.A,{className:"h-4 w-4"})}),(0,t.jsx)(d.A,{variant:"ghost",size:"sm",onClick:()=>{N(e),v(!0)},children:(0,t.jsx)(l.A,{className:"h-4 w-4 text-red-500"})})]})}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Motocicletas"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Gestiona el inventario de motocicletas"})]}),(0,t.jsxs)(d.A,{onClick:()=>{b(null),y(!0)},children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Nueva Motocicleta"]})]}),(0,t.jsx)(o.A,{data:e,columns:k,loading:r,emptyMessage:"No hay motocicletas registradas"}),(0,t.jsx)(u,{isOpen:p,onClose:()=>{y(!1),b(null)},onSuccess:()=>{E()},motorcycle:x}),(0,t.jsx)(g.A,{isOpen:j,onClose:()=>{v(!1),N(null)},onConfirm:w,title:"Eliminar Motocicleta",message:"\xbfEst\xe1s seguro de que deseas eliminar esta motocicleta?",itemName:f?"".concat(f.brand," ").concat(f.model):"",loading:A,checkDependencies:f?()=>s.Di.checkDependencies(f.id):void 0})]})}},4798:(e,a,r)=>{Promise.resolve().then(r.bind(r,1701))}},e=>{e.O(0,[445,139,441,964,358],()=>e(e.s=4798)),_N_E=e.O()}]);